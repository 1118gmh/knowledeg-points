### HTTP的请求和响应

1. 打开一个浏览器，从地址栏输入一个网址，按下enter键，到显示整个页面，中间都经历了哪些事情

```
【HTTP请求阶段：向服务器发送请求】
1. 浏览器首先向DNS域名解析服务器发送请求
2. DNS反解析：根据浏览器请求地址中的域名，到DNS服务器中找到对应的服务器外网IP地址
3. 通过找到外网IP，向对应的服务器发送请求（首先访问的是服务器的web站点管理工具：准确来说是我们基于工具在服务器上创建了很多服务，当客户端访问的时候，服务器会匹配出具体请求哪一个服务）
4. 通过URL地址中携带的端口号，找到服务器上对应的服务，以及服务所管理的项目源文件
【HTTP响应阶段：服务器把客户端需要的内容准备好，并且返回给客户端】
5. 服务端根据请求地址中的路径名称、问好传参或者哈希值，把客户端需要的内容进行准备和处理
6. 把准备的内容相应给客户端（如果请求的是HTML或者CSS等这样的资源文件，服务器返回的是资源文件的源代码[不是文件本身]）
【浏览器渲染阶段】
7. 客户端浏览器接收到服务器返回的源代码，基于自己内部的渲染引擎（内核），开始进行页面的绘制和渲染
 -> 首先计算DOM结构，生成DOM TREE
 -> 自上而下运行代码，加载css等资源内容
 -> 根据获取的CSS开始渲染（绘制）页面：RENDER TREE
 -> 开始渲染和绘制
```

2. 我们把一次完整的 请求+响应 称为“HTTP事物”

   事物就是完整的一次操作，请求和响应缺一不可

3. 一个页面加载完成，需要向服务器发起很多次HTTP事物操作

   一般来说：首先把HTML源代码拿回来，加载HTML的时候，遇到link 、 script 、 img[src] 、iframe 、 video 、 audio...都会重新和服务器端简历HTTP事物交互

   特殊情况：如果我们做了资源缓存处理（304），而且即将加载的资源已经加载过了，这样的操作和传统的HTTP事物有所不一样，它们是从服务器和浏览器的缓存中读取数据，比传统的读取块很多

4. 在客户端向服务器发送请求，以及服务器把内容响应给客户端的时候，中间相互传递了很多内容（客户端把一些内容传递服务器，服务器把一些内容响应给客户端），我们把传递的内容统称为“HTTP报文”

【从输入一个网址到显示一个页面，浏览器到底背着我们干了什么！！！】

![http的请求和响应](D:\knowledeg-points\HTTP学习\img\http的请求和响应.png)